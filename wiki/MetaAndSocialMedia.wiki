#summary The description of page metadata and the social media integation features

<wiki:toc max_depth="2" />

= Forced page metadata =

The base template base/heavy.html.ep forces the following metadata on all pages.

  * meta http-equiv content-type
  * meta http-equiv content-language (content langauge also set on html and body so we really are on the safe side)
  * link shortcut icon (standard old-school favicon.ico at site's root)
  * meta generator
  * meta author
  * meta copyright
  * link copyright
  * meta robots
  * meta og:site_name
  * meta fb:admins
  * link me (links to facebook fan page)
  * meta credits (gives credits to some fundamental technologies that the service is based on) 

The meta robots are controlled by stash variables meta_index and meta_follow. The
default is index,follow when with default setup and noindex,nofollow otherwise. 
Controllers are allowed to change this behavior.
       
= Overloadable page metadata blocks = 

The base template base/heavy.html.ep provides the following blocks that
can be overloaded by page templates if needed.

== canon ==

  * link canonical, links to the same page in the same language with default setup
  * meta og:url, just as the previous line describes

== image ==

  * meta image, links to the site's logo in png format
  * meta og:image, just as the previous line describes

= Custom page type specific metadata =

== front ==

Added metadata
  * og:title
  * og:type = website
  * description
  * og:description
  * keywords

Added features
  * social media buttons
    
== news ==

Added metadata
  * og:type = catz:list
  * description
  * og:description
  * keywords

Modified metadata
  * noindex     

== new1 ==

Added metadata
  * og:title
  * og:type = article
  * link rel index points to news main page
  * link rel next points to next news article if any
  * link rel prev points to previous news article if any

Added features
  * social media buttons

== lists ==

Added metadata
  * og:type = list
  * description
  * og:description

Modified metadata
  * noindex     

== list1 ==

Added metadata
  * og:type = list
  * og:title
  * description
  * og:description
  * link rel index points to lists  

Added features
  * social media buttons

== browse ==

Added metadata
  * og:type = catz:thumbnails, but in runmode pair 
    * catz:concept where concept is the concept of the subject
    * if concept is org, umb, breeder then og:type = non_profit
    * if concept is nat then og:type = country            
    * if concept is loc then og:type = location
  * og:locality is set to subject if runmode pair and concept is loc
  * og:country-name is set to Finland if runmode pair and concept is loc, but if concept is nat then set to country in question  
  * og:title set according to runmode
  * link rel start points to the first page
  * link rel next points to next page if any
  * link rel prev poins to previous page if any

Modified metadata
  * block canon
     * 1st page links to the same page but wihtout setup and photo id
     * on other pages links to the same page but without setup and using the first thumbnail's photo id as photo id      
  * block image 
     * on runmode pair and concept nat set to the flag of the nation
     * on other cases set to the first thumbnail on the page
  * robots
     * on rumode all only the first page is indexed, all pages are followed
     * on runmode pair only the first page is indexed and followed, others are not
     * on runmode search nothing is indexed nor followed                        

Added features
  * social media buttons on 1st page of the set
  
== view ==

Added metadata
  * og:type = catz:photo
  * og:title set according the photo's text
  * og:locality is set to subject if runmode pair and concept is loc
  * og:country-name is set to Finland if runmode pair and concept is loc, but if concept is nat then set to country in question
  * link rel index points to the corresponding browse page  
  * link rel start points to the first photo of the set
  * link rel next points to next photo of the set if any
  * link rel prev poins to previous photo of the set if any

Modified metadata
  * block canon points to the same photo on runmode all and without setup      
  * block image points to the photo's thumbnail version
  * robots
     * on runmode all use defaults
     * on runmode pair and search no indexing, no following
       
Added features
  * social media buttons

== search ==

Added metadata
  * og:type = catz:search
  * og:title
  * description
  * og:description
  * keywords

Modified metadata
  * 
   
Added features
  * social media buttons if no i (init) or q (what) parameter

== more ==

Added metadata
  * og:type = article
  * og:  

<meta name="og:type" content="article">
<meta name="og:title" content="<%= $t->{ ( uc $topic ) . '_TITLE' } %>">

== build ==

  * lists: noindex
  * browse runmode pair: 1st page default, other pages noindex
  * browse runmode all: noindex
  * browse runmode search: noindex,nofollow
  * search: if i parameter is given then none
  * build: none, but if runmode all, default setup and no widget parameters then index,nofollow

== block canon ==

  
  * view: links to the same photo without setup runmode all with id
 
|| *type* || *tag* || *front* || *new1* || *news* || *lists* || *list1* || *browse* || *view* || *search* || *more * || *build* ||

|| meta || block image || default || default || default || default || default || use a random thumnail on page, but if in pair mode pri nat use flag || use the photo thumbnail || default ||
|| meta || meta description || semi-fixed text || || semi-fixed text || a fixed text || generated from pri and subject || || || a fixed text || 
|| meta || meta og:description || see previous line || || see previous line || see previous line || see previous line || || || see previous line ||
|| meta || meta keywords || fixed keywords || || fixed keywords ||
|| facebook || meta og:type || website || catz:list || article || catz:list || catz:list || default "catz:thumbnails", in runmode pair on org, umb, breeder: non_profit, on nat: country, on loc: city, on others "catz:" + pri || catz:photo || catz:search ||  
|| facebook || meta og:title || site name & slogan || a fixed title || the date and the news title || a fixed title || the page title || in runmode all a title "n cat show photos", in runmode pair a title constructed from the pri and subject, in runmode search a fixed text + the search || photo id always + photo text if exists || the page title ||  
|| facebook || meta og:locality || || || || || || in runmode pair on loc contains the location name || in runmode pair on loc contains the location name || ||  
|| facebook || meta og:country-name || || || || || || in runmode pair: on loc contains the country name, on nat contains the nation || in runmode pair: on loc contains the country name, on nat contains the nation || ||
   
= Social media integration features =

All pages contain share function for Facebook, Google+ and Twitter.
???

Facebook Share uses
  * the old-school share API since the newer API was very unreliable
  * image icon  
  * canonical url as url
  * og:title as text

Google+ button uses
  * medium size button with no annotation     
  
Twitter Tweet uses
  * the URL/GET API
  * image icon
  * canonical url as url
  * og:title as text    
       
 

